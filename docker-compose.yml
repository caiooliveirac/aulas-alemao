services:
  deutschbruecke:
    build:
      context: .
      dockerfile: Dockerfile
      # basePath é definido no build do Next (path-based routing no proxy)
      args:
        NEXT_PUBLIC_BASE_PATH: ${NEXT_PUBLIC_BASE_PATH:-/alemao}
    container_name: deutschbruecke
    environment:
      - NODE_ENV=production
      - DB_DATA_DIR=/app/data
      # Mantém explícito qual basePath foi usado (útil para debug)
      - NEXT_PUBLIC_BASE_PATH=${NEXT_PUBLIC_BASE_PATH:-/alemao}
    volumes:
      - ./data:/app/data
    ports:
      - "127.0.0.1:8087:3000"
    networks:
      - perguntas_default
    restart: unless-stopped

networks:
  perguntas_default:
    external: true
    name: perguntas_default

